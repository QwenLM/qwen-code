# Chrome MCP Integration - åŠŸèƒ½ä¸æ¶æ„

> **ç‰ˆæœ¬**: 2.0.0 | **æœ€åæ›´æ–°**: 2026-02-08

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç» Chrome MCP Integration çš„åŠŸèƒ½èƒ½åŠ›ã€æ•´ä½“æ¶æ„å’Œæ‰€æœ‰å¯ç”¨å·¥å…·ã€‚

---

## ğŸ“Š æ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆ

### è£…å¥½åå¯ä»¥ç›´æ¥è°ƒç”¨çš„èƒ½åŠ›

Chrome MCP Integration å®‰è£…åï¼Œæä¾›ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š

| èƒ½åŠ›ç±»åˆ«      | å·¥å…·æ•°é‡ | ä¸»è¦åŠŸèƒ½                              |
| ------------- | -------- | ------------------------------------- |
| ğŸ–¥ï¸ æµè§ˆå™¨ç®¡ç† | 6 ä¸ª     | æ ‡ç­¾é¡µç®¡ç†ã€é¡µé¢å¯¼èˆªã€DOM è®¿é—®        |
| ğŸ–±ï¸ é¡µé¢äº¤äº’   | 5 ä¸ª     | ç‚¹å‡»ã€å¡«å……ã€é”®ç›˜è¾“å…¥ã€JavaScript æ‰§è¡Œ |
| ğŸŒ ç½‘ç»œç›‘æ§   | 2 ä¸ª     | è¯·æ±‚æ•è·ï¼ˆå«å“åº”ä½“ï¼‰ã€å¸¦è®¤è¯è¯·æ±‚      |
| ğŸ“„ å†…å®¹åˆ†æ   | 2 ä¸ª     | é¡µé¢å†…å®¹æå–ã€æ§åˆ¶å°æ—¥å¿—æ•è·          |
| ğŸ’¾ æ•°æ®ç®¡ç†   | 4 ä¸ª     | å†å²è®°å½•ã€ä¹¦ç­¾ç®¡ç†                    |
| ğŸ“¸ æˆªå›¾å½•åˆ¶   | 2 ä¸ª     | é¡µé¢æˆªå›¾ã€GIF å½•åˆ¶                    |
| âš¡ æ€§èƒ½åˆ†æ   | 3 ä¸ª     | æ€§èƒ½è¿½è¸ªã€åˆ†æ                        |
| ğŸ“ æ–‡ä»¶å¯¹è¯æ¡† | 3 ä¸ª     | æ–‡ä»¶ä¸Šä¼ ã€å¯¹è¯æ¡†å¤„ç†ã€ä¸‹è½½ç®¡ç†        |

**æ€»è®¡**: **27 ä¸ªæ´»è·ƒå·¥å…·**

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Chrome Browser                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Chrome Extension (Manifest V3)                     â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Side Panel   â”‚  â”‚ Service      â”‚  â”‚ Content  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚ (React 19)   â”‚  â”‚ Worker       â”‚  â”‚ Scripts  â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                â”‚
                          Native Messaging (stdio)
                                 â”‚                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Native Server (Node.js)             â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚  â”‚ MCP Server (stdio/StreamableHttp)â”‚ â”‚
                    â”‚  â”‚  - 27 chrome_* å·¥å…·              â”‚ â”‚
                    â”‚  â”‚  - Native Messaging Handler      â”‚ â”‚
                    â”‚  â”‚  - Fastify HTTP Server           â”‚ â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                          MCP Protocol (stdio)
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚          Qwen CLI                      â”‚
                    â”‚  - AI Agent æ‰§è¡Œ                        â”‚
                    â”‚  - MCP Server ç®¡ç†                      â”‚
                    â”‚  - å·¥å…·è°ƒç”¨ç¼–æ’                          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¶æ„å±‚çº§è¯´æ˜

#### ç¬¬ä¸€å±‚ï¼šChrome Extension

**ç»„æˆéƒ¨åˆ†**ï¼š

1. **Side Panel (React 19)**
   - å®Œæ•´çš„èŠå¤© UI ç•Œé¢
   - æ”¯æŒæ¶ˆæ¯æµå¼ä¼ è¾“
   - å·¥å…·è°ƒç”¨å¯è§†åŒ–
   - æƒé™ç®¡ç†å’Œ OAuth æ”¯æŒ

2. **Service Worker**
   - Native Messaging é€šä¿¡ç®¡ç†
   - æ¶ˆæ¯è·¯ç”±ï¼ˆUI â†” Native Serverï¼‰
   - æµè§ˆå™¨ API è°ƒç”¨ï¼ˆtabs, debugger, webRequest ç­‰ï¼‰
   - çŠ¶æ€ç®¡ç†

3. **Content Scripts**
   - é¡µé¢å†…å®¹æå–
   - DOM å…ƒç´ æ“ä½œ
   - ç½‘ç»œè¯·æ±‚æ‹¦æˆªï¼ˆFetch APIï¼‰
   - æ§åˆ¶å°æ—¥å¿—æ•è·

#### ç¬¬äºŒå±‚ï¼šNative Server

**æ ¸å¿ƒåŠŸèƒ½**ï¼š

1. **Native Messaging Host**
   - å¤„ç† Chrome Extension çš„ stdio é€šä¿¡
   - è·¯ç”±å·¥å…·è°ƒç”¨åˆ°å®é™…æ‰§è¡Œå™¨
   - ç®¡ç†æµè§ˆå™¨çŠ¶æ€

2. **MCP Server**
   - å®ç° Model Context Protocol
   - æä¾› 27 ä¸ª chrome\_\* å·¥å…·
   - æ”¯æŒ stdio å’Œ StreamableHttp æ¨¡å¼
   - ä¸ Qwen CLI é€šä¿¡

3. **HTTP Server (å¯é€‰)**
   - Fastify æ¡†æ¶
   - æä¾› REST APIï¼ˆç”¨äºè°ƒè¯•ï¼‰
   - ç›‘å¬ç«¯å£ 12306

#### ç¬¬ä¸‰å±‚ï¼šQwen CLI

**åŠŸèƒ½**ï¼š

- æ¥æ”¶ç”¨æˆ·è‡ªç„¶è¯­è¨€æŒ‡ä»¤
- è°ƒç”¨ MCP Server ä¸­çš„å·¥å…·
- ç¼–æ’å¤šå·¥å…·åä½œ
- è¿”å›æ‰§è¡Œç»“æœ

---

## ğŸ› ï¸ å®Œæ•´å·¥å…·åˆ—è¡¨ï¼ˆ27ä¸ªï¼‰

### 1. æµè§ˆå™¨ç®¡ç†å·¥å…·ï¼ˆ6ä¸ªï¼‰

#### 1.1 `get_windows_and_tabs`

**åŠŸèƒ½**: è·å–æ‰€æœ‰æ‰“å¼€çš„çª—å£å’Œæ ‡ç­¾é¡µ

**å‚æ•°**: æ— 

**è¿”å›**: çª—å£å’Œæ ‡ç­¾é¡µåˆ—è¡¨ï¼ŒåŒ…å« IDã€æ ‡é¢˜ã€URLã€æ´»è·ƒçŠ¶æ€

**å…¸å‹ç”¨é€”**:

```
# Qwen CLI ä¸­
> åˆ—å‡ºæ‰€æœ‰æ‰“å¼€çš„æ ‡ç­¾é¡µ
> æ‰¾åˆ°æ ‡é¢˜åŒ…å«"GitHub"çš„æ ‡ç­¾
```

---

#### 1.2 `chrome_navigate`

**åŠŸèƒ½**: å¯¼èˆªåˆ° URLã€åˆ·æ–°ã€å‰è¿›/åé€€

**å‚æ•°**:

- `url` (string): ç›®æ ‡ URL æˆ– "back"/"forward"
- `refresh` (boolean): æ˜¯å¦åˆ·æ–°
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID
- `newWindow` (boolean): æ–°çª—å£æ‰“å¼€
- `width`/`height` (number): çª—å£å°ºå¯¸

**å…¸å‹ç”¨é€”**:

```
> æ‰“å¼€ https://github.com
> åˆ·æ–°å½“å‰é¡µé¢
> è¿”å›ä¸Šä¸€é¡µ
```

---

#### 1.3 `chrome_switch_tab`

**åŠŸèƒ½**: åˆ‡æ¢åˆ°æŒ‡å®šæ ‡ç­¾é¡µ

**å‚æ•°**:

- `tabId` (number, å¿…éœ€): ç›®æ ‡æ ‡ç­¾ ID
- `windowId` (number): çª—å£ ID

---

#### 1.4 `chrome_close_tabs`

**åŠŸèƒ½**: å…³é—­ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾é¡µ

**å‚æ•°**:

- `tabIds` (array): æ ‡ç­¾ ID åˆ—è¡¨
- `url` (string): æ ¹æ® URL åŒ¹é…å…³é—­

**å…¸å‹ç”¨é€”**:

```
> å…³é—­æ‰€æœ‰ç©ºç™½æ ‡ç­¾
> å…³é—­é‡å¤çš„æ ‡ç­¾é¡µ
```

---

#### 1.5 `chrome_read_page`

**åŠŸèƒ½**: è·å–é¡µé¢çš„å¯è®¿é—®æ€§æ ‘ï¼ˆAccessibility Treeï¼‰

**å‚æ•°**:

- `filter` (string): "interactive" åªè¿”å›å¯äº¤äº’å…ƒç´ 
- `depth` (number): DOM éå†æ·±åº¦
- `refId` (string): èšç„¦åˆ°ç‰¹å®šå…ƒç´ 
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID

**è¿”å›**: å…ƒç´ æ ‘ï¼Œæ¯ä¸ªå…ƒç´ åŒ…å« `ref`ï¼ˆå¼•ç”¨ IDï¼‰ã€`role`ã€`text`

**é‡è¦æ€§**: â­â­â­â­â­
è¿™æ˜¯æœ€é‡è¦çš„å·¥å…·ä¹‹ä¸€ï¼Œè¿”å›çš„ `ref` å¯ç”¨äºåç»­æ‰€æœ‰æ“ä½œï¼Œæ¯”é€‰æ‹©å™¨æ›´å¯é ã€‚

**å…¸å‹ç”¨é€”**:

```
> åˆ†æè¿™ä¸ªé¡µé¢çš„ç»“æ„
> æ‰¾å‡ºæ‰€æœ‰å¯ç‚¹å‡»çš„æŒ‰é’®
> è·å–è¡¨å•çš„æ‰€æœ‰è¾“å…¥æ¡†
```

---

#### 1.6 `chrome_computer`

**åŠŸèƒ½**: ç»Ÿä¸€çš„æµè§ˆå™¨äº¤äº’å·¥å…·ï¼ˆé¼ æ ‡ã€é”®ç›˜ã€æˆªå›¾ç­‰ï¼‰

**å‚æ•°**:

- `action` (string, å¿…éœ€): æ“ä½œç±»å‹
  - ç‚¹å‡»: `left_click`, `right_click`, `double_click`
  - æ‹–æ‹½: `left_click_drag`
  - æ»šåŠ¨: `scroll`, `scroll_to`
  - è¾“å…¥: `type`, `key`, `fill`, `fill_form`
  - å…¶ä»–: `hover`, `wait`, `resize_page`, `zoom`, `screenshot`
- `ref` (string): chrome_read_page è¿”å›çš„å…ƒç´ å¼•ç”¨
- `coordinates` (object): åæ ‡ {x, y}
- `text` (string): è¾“å…¥æ–‡æœ¬æˆ–æŒ‰é”®
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID

**å…¸å‹ç”¨é€”**:

```
> æ»šåŠ¨é¡µé¢åˆ°åº•éƒ¨
> ç‚¹å‡»åæ ‡ (100, 200) å¤„çš„å…ƒç´ 
> æˆªå›¾å½“å‰é¡µé¢
```

---

### 2. é¡µé¢äº¤äº’å·¥å…·ï¼ˆ5ä¸ªï¼‰

#### 2.1 `chrome_click_element`

**åŠŸèƒ½**: ç‚¹å‡»é¡µé¢å…ƒç´ 

**å‚æ•°**:

- `selector` (string): CSS é€‰æ‹©å™¨æˆ– XPath
- `selectorType` (string): "css" æˆ– "xpath"
- `ref` (string): å…ƒç´ å¼•ç”¨ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
- `coordinates` (object): è§†å£åæ ‡
- `double` (boolean): åŒå‡»
- `button` (string): "left"/"right"/"middle"
- `waitForNavigation` (boolean): ç­‰å¾…å¯¼èˆª

**å…¸å‹ç”¨é€”**:

```
> ç‚¹å‡»ç™»å½•æŒ‰é’®
> ç‚¹å‡»é¡µé¢ä¸Šçš„"æ›´å¤š"é“¾æ¥
> åŒå‡»æ–‡æœ¬é€‰ä¸­
```

---

#### 2.2 `chrome_fill_or_select`

**åŠŸèƒ½**: å¡«å……æˆ–é€‰æ‹©è¡¨å•å…ƒç´ 

**å‚æ•°**:

- `selector` (string): CSS é€‰æ‹©å™¨
- `ref` (string): å…ƒç´ å¼•ç”¨
- `value` (string|number|boolean, å¿…éœ€): å¡«å……å€¼
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID

**æ”¯æŒç±»å‹**: input, textarea, select, checkbox, radio

**å…¸å‹ç”¨é€”**:

```
> åœ¨ç”¨æˆ·åæ¡†è¾“å…¥ "admin"
> é€‰æ‹©å›½å®¶ä¸º "China"
> å‹¾é€‰åŒæ„åè®®å¤é€‰æ¡†
```

---

#### 2.3 `chrome_keyboard`

**åŠŸèƒ½**: æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥

**å‚æ•°**:

- `keys` (string, å¿…éœ€): æŒ‰é”®æˆ–ç»„åˆé”®
- `selector` (string): ç›®æ ‡å…ƒç´ 
- `delay` (number): æŒ‰é”®é—´å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼Œé»˜è®¤50ï¼‰

**å…¸å‹ç”¨é€”**:

```
> æŒ‰ Enter æäº¤è¡¨å•
> æŒ‰ Ctrl+A å…¨é€‰
> è¾“å…¥ "Hello World"
```

---

#### 2.4 `chrome_request_element_selection`

**åŠŸèƒ½**: è¯·æ±‚ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©é¡µé¢å…ƒç´ ï¼ˆäººåœ¨å›è·¯ï¼‰

**å‚æ•°**:

- `requests` (array, å¿…éœ€): é€‰æ‹©è¯·æ±‚åˆ—è¡¨
  - `id` (string): è¯·æ±‚ ID
  - `name` (string): æ˜¾ç¤ºæ ‡ç­¾
  - `description` (string): è¯¦ç»†è¯´æ˜
- `timeoutMs` (number): è¶…æ—¶æ—¶é—´ï¼ˆé»˜è®¤180000ï¼‰

**è¿”å›**: ç”¨æˆ·é€‰æ‹©çš„å…ƒç´  ref åˆ—è¡¨

**ä½¿ç”¨åœºæ™¯**: å½“è‡ªåŠ¨å®šä½å¤±è´¥çº¦ 3 æ¬¡åï¼Œè¯·æ±‚ç”¨æˆ·ååŠ©

**å…¸å‹ç”¨é€”**:

```
> æ— æ³•è‡ªåŠ¨æ‰¾åˆ°ç™»å½•æŒ‰é’®ï¼Œè¯·ç”¨æˆ·æ‰‹åŠ¨æŒ‡å‡º
> è®©ç”¨æˆ·é€‰æ‹©æƒ³è¦æå–çš„å†…å®¹åŒºåŸŸ
```

---

#### 2.5 `chrome_javascript`

**åŠŸèƒ½**: åœ¨æ ‡ç­¾é¡µä¸­æ‰§è¡Œ JavaScript ä»£ç 

**å‚æ•°**:

- `code` (string, å¿…éœ€): JavaScript ä»£ç ï¼ˆæ”¯æŒ async/await å’Œ returnï¼‰
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID
- `timeoutMs` (number): æ‰§è¡Œè¶…æ—¶ï¼ˆé»˜è®¤15000ï¼‰
- `maxOutputBytes` (number): æœ€å¤§è¾“å‡ºå­—èŠ‚ï¼ˆé»˜è®¤51200ï¼‰

**è¿”å›**: ä»£ç æ‰§è¡Œç»“æœï¼ˆè‡ªåŠ¨æ¸…ç†æ•æ„Ÿæ•°æ®ï¼‰

**å…¸å‹ç”¨é€”**:

```
> è·å–é¡µé¢æ ‡é¢˜
> æå–æ‰€æœ‰é“¾æ¥
> æ‰§è¡Œå¤æ‚çš„æ•°æ®å¤„ç†
```

---

### 3. ç½‘ç»œç›‘æ§å·¥å…·ï¼ˆ2ä¸ªï¼‰

#### 3.1 `chrome_network_capture`

**åŠŸèƒ½**: ç»Ÿä¸€çš„ç½‘ç»œè¯·æ±‚æ•è·å·¥å…·

**å‚æ•°**:

- `action` (string, å¿…éœ€): "start" å¼€å§‹ï¼Œ"stop" åœæ­¢
- `needResponseBody` (boolean): æ•è·å“åº”ä½“ï¼ˆä½¿ç”¨ Debugger APIï¼‰
- `needDocumentBody` (boolean): æ•è· Document å“åº”ä½“
- `captureWebSocket` (boolean): æ•è· WebSocket
- `url` (string): æ•è·æ—¶å¯¼èˆªåˆ°çš„ URL
- `maxCaptureTime` (number): æœ€å¤§æ•è·æ—¶é—´ï¼ˆé»˜è®¤180000ï¼‰
- `includeStatic` (boolean): åŒ…å«é™æ€èµ„æº
- `maxBodyChars` (number): å“åº”ä½“æœ€å¤§å­—ç¬¦æ•°

**å…¸å‹ç”¨é€”**:

```
> æ•è·è¿™ä¸ªé¡µé¢çš„æ‰€æœ‰ API è¯·æ±‚
> è·å–ç™»å½•æ¥å£çš„å“åº”ä½“
> ç›‘æ§ WebSocket æ¶ˆæ¯
```

---

#### 3.2 `chrome_network_request`

**åŠŸèƒ½**: å‘é€å¸¦æµè§ˆå™¨ä¸Šä¸‹æ–‡çš„ HTTP è¯·æ±‚ï¼ˆæºå¸¦ cookiesï¼‰

**å‚æ•°**:

- `url` (string, å¿…éœ€): è¯·æ±‚ URL
- `method` (string): HTTP æ–¹æ³•ï¼ˆé»˜è®¤ GETï¼‰
- `headers` (object): è¯·æ±‚å¤´
- `body` (string): è¯·æ±‚ä½“
- `formData` (object): multipart/form-data

**å…¸å‹ç”¨é€”**:

```
> ç”¨å½“å‰ç™»å½•çŠ¶æ€è°ƒç”¨ API
> ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
> å‘é€å¸¦è®¤è¯çš„è¯·æ±‚
```

---

### 4. å†…å®¹åˆ†æå·¥å…·ï¼ˆ2ä¸ªï¼‰

#### 4.1 `chrome_get_web_content`

**åŠŸèƒ½**: æå–é¡µé¢å†…å®¹

**å‚æ•°**:

- `url` (string): è¦æå–çš„ URL
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID
- `background` (boolean): åå°æ‰§è¡Œ
- `htmlContent` (boolean): è·å– HTML
- `textContent` (boolean): è·å–æ–‡æœ¬ï¼ˆé»˜è®¤ trueï¼‰
- `selector` (string): åªæå–ç‰¹å®šå…ƒç´ 

**å…¸å‹ç”¨é€”**:

```
> æå–æ–‡ç« æ­£æ–‡
> è·å–é¡µé¢æ‰€æœ‰æ–‡æœ¬
> æŠ“å–ç‰¹å®šåŒºåŸŸçš„å†…å®¹
```

---

#### 4.2 `chrome_console`

**åŠŸèƒ½**: æ•è·æµè§ˆå™¨æ§åˆ¶å°è¾“å‡º

**å‚æ•°**:

- `url` (string): å¯¼èˆªå¹¶æ•è·
- `tabId` (number): ç›®æ ‡æ ‡ç­¾ ID
- `mode` (string): "snapshot"ï¼ˆç­‰å¾…2sï¼‰æˆ– "buffer"ï¼ˆå³æ—¶ï¼‰
- `includeExceptions` (boolean): åŒ…å«å¼‚å¸¸
- `maxMessages` (number): æœ€å¤§æ¶ˆæ¯æ•°
- `pattern` (string): æ­£åˆ™è¿‡æ»¤
- `onlyErrors` (boolean): åªè¿”å›é”™è¯¯

**å…¸å‹ç”¨é€”**:

```
> æ£€æŸ¥é¡µé¢æ˜¯å¦æœ‰é”™è¯¯
> è·å–è°ƒè¯•æ—¥å¿—
> ç›‘æ§å¼‚å¸¸ä¿¡æ¯
```

---

### 5. æ•°æ®ç®¡ç†å·¥å…·ï¼ˆ4ä¸ªï¼‰

#### 5.1 `chrome_history`

**åŠŸèƒ½**: æœç´¢æµè§ˆå†å²

**å‚æ•°**:

- `text` (string): æœç´¢å…³é”®è¯
- `startTime` / `endTime` (string): æ—¶é—´èŒƒå›´
- `maxResults` (number): æœ€å¤§ç»“æœæ•°

---

#### 5.2 `chrome_bookmark_search`

**åŠŸèƒ½**: æœç´¢ä¹¦ç­¾

**å‚æ•°**:

- `query` (string): æœç´¢å…³é”®è¯
- `maxResults` (number): æœ€å¤§ç»“æœæ•°

---

#### 5.3 `chrome_bookmark_add`

**åŠŸèƒ½**: æ·»åŠ ä¹¦ç­¾

**å‚æ•°**:

- `url` (string): ä¹¦ç­¾ URL
- `title` (string): ä¹¦ç­¾æ ‡é¢˜
- `parentId` (string): çˆ¶æ–‡ä»¶å¤¹

---

#### 5.4 `chrome_bookmark_delete`

**åŠŸèƒ½**: åˆ é™¤ä¹¦ç­¾

**å‚æ•°**:

- `bookmarkId` (string): ä¹¦ç­¾ ID
- `url` (string): æˆ–é€šè¿‡ URL åˆ é™¤

---

### 6. æˆªå›¾ä¸å½•åˆ¶å·¥å…·ï¼ˆ2ä¸ªï¼‰

#### 6.1 `chrome_screenshot`

**åŠŸèƒ½**: é¡µé¢æˆªå›¾

**å‚æ•°**:

- `name` (string): æ–‡ä»¶å
- `selector` (string): æˆªå–ç‰¹å®šå…ƒç´ 
- `fullPage` (boolean): å…¨é¡µæˆªå›¾
- `storeBase64` (boolean): è¿”å› base64
- `savePng` (boolean): ä¿å­˜ä¸º PNG

**å…¸å‹ç”¨é€”**:

```
> æˆªå›¾å½“å‰é¡µé¢
> æˆªå–é¡µé¢æŸä¸ªåŒºåŸŸ
> å…¨é¡µæˆªå›¾
```

---

#### 6.2 `chrome_gif_recorder`

**åŠŸèƒ½**: å½•åˆ¶æµè§ˆå™¨æ´»åŠ¨ä¸º GIF

**å‚æ•°**:

- `action` (string): "start", "auto_start", "stop", "capture"
- `fps` (number): å¸§ç‡ï¼ˆ1-30ï¼‰
- `durationMs` (number): æœ€å¤§å½•åˆ¶æ—¶é•¿
- `enhancedRendering` (object): å¢å¼ºæ¸²æŸ“ï¼ˆç‚¹å‡»æŒ‡ç¤ºã€æ‹–æ‹½è·¯å¾„ï¼‰

**å…¸å‹ç”¨é€”**:

```
> å½•åˆ¶æ“ä½œæ¼”ç¤º
> åˆ¶ä½œæ•™ç¨‹ GIF
```

---

### 7. æ€§èƒ½åˆ†æå·¥å…·ï¼ˆ3ä¸ªï¼‰

#### 7.1 `performance_start_trace`

**åŠŸèƒ½**: å¼€å§‹æ€§èƒ½è¿½è¸ª

**å‚æ•°**:

- `reload` (boolean): è¿½è¸ªæ—¶åˆ·æ–°é¡µé¢
- `autoStop` (boolean): è‡ªåŠ¨åœæ­¢
- `durationMs` (number): æŒç»­æ—¶é—´

---

#### 7.2 `performance_stop_trace`

**åŠŸèƒ½**: åœæ­¢æ€§èƒ½è¿½è¸ª

**å‚æ•°**:

- `saveToDownloads` (boolean): ä¿å­˜ä¸º JSON
- `filenamePrefix` (string): æ–‡ä»¶åå‰ç¼€

---

#### 7.3 `performance_analyze_insight`

**åŠŸèƒ½**: åˆ†ææ€§èƒ½è¿½è¸ªç»“æœ

**å‚æ•°**:

- `insightName` (string): åˆ†æç±»å‹
- `timeoutMs` (number): åˆ†æè¶…æ—¶

---

### 8. æ–‡ä»¶ä¸å¯¹è¯æ¡†å·¥å…·ï¼ˆ3ä¸ªï¼‰

#### 8.1 `chrome_upload_file`

**åŠŸèƒ½**: ä¸Šä¼ æ–‡ä»¶åˆ°è¡¨å•

**å‚æ•°**:

- `selector` (string, å¿…éœ€): æ–‡ä»¶è¾“å…¥æ¡†é€‰æ‹©å™¨
- `filePath` (string): æœ¬åœ°æ–‡ä»¶è·¯å¾„
- `fileUrl` (string): ä» URL ä¸‹è½½
- `base64Data` (string): Base64 æ•°æ®

---

#### 8.2 `chrome_handle_dialog`

**åŠŸèƒ½**: å¤„ç† JavaScript å¯¹è¯æ¡†ï¼ˆalert/confirm/promptï¼‰

**å‚æ•°**:

- `action` (string): "accept" æˆ– "dismiss"
- `promptText` (string): prompt è¾“å…¥æ–‡æœ¬

---

#### 8.3 `chrome_handle_download`

**åŠŸèƒ½**: ç­‰å¾…å¹¶å¤„ç†ä¸‹è½½

**å‚æ•°**:

- `filenameContains` (string): æ–‡ä»¶åè¿‡æ»¤
- `timeoutMs` (number): è¶…æ—¶æ—¶é—´
- `waitForComplete` (boolean): ç­‰å¾…å®Œæˆ

---

## ğŸ”‘ å·¥å…·ä½¿ç”¨æœ€ä½³å®è·µ

### 1. å…ƒç´ å®šä½ä¼˜å…ˆçº§

æ¨èé¡ºåºï¼š

1. **chrome_read_page** â†’ è·å– `ref` â†’ ä½¿ç”¨ `ref` æ“ä½œï¼ˆæœ€å¯é ï¼‰
2. **CSS é€‰æ‹©å™¨** â†’ ä½¿ç”¨ `selector`
3. **åæ ‡** â†’ ä½¿ç”¨ `coordinates`ï¼ˆæœ€ä¸ç¨³å®šï¼Œé¿å…ä½¿ç”¨ï¼‰

### 2. äººåœ¨å›è·¯æ¨¡å¼

å½“è‡ªåŠ¨å®šä½å¤±è´¥çº¦ 3 æ¬¡åï¼Œä½¿ç”¨ `chrome_request_element_selection` è¯·æ±‚ç”¨æˆ·ååŠ©ã€‚

### 3. ç½‘ç»œæ•è·æ³¨æ„äº‹é¡¹

- é»˜è®¤ä½¿ç”¨ webRequest APIï¼ˆè½»é‡çº§ï¼Œæ— å†²çªï¼‰
- éœ€è¦å“åº”ä½“æ—¶æ‰å¯ç”¨ `needResponseBody`ï¼ˆä¼šä½¿ç”¨ Debugger APIï¼Œå¯èƒ½ä¸ DevTools å†²çªï¼‰

### 4. æ€§èƒ½è€ƒè™‘

- `chrome_read_page` çš„ `depth` æ§åˆ¶éå†æ·±åº¦
- `chrome_screenshot` çš„ `fullPage=false` åŠ å¿«é€Ÿåº¦
- `chrome_console` çš„ buffer æ¨¡å¼æ¯” snapshot å¿«

---

## ğŸ“Š æ¶æ„ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§       | æ—§æ¶æ„ (HTTP) | æ–°æ¶æ„ (Native Messaging) |
| ---------- | ------------- | ------------------------- |
| é€šä¿¡å±‚æ•°   | 5 å±‚          | **3 å±‚** (-40%)           |
| å·¥å…·æ•°é‡   | 10 ä¸ª         | **27 ä¸ª** (+170%)         |
| é€šä¿¡æ–¹å¼   | HTTP + SSE    | Native Messaging (stdio)  |
| æ€§èƒ½       | ä¸€èˆ¬          | **æ›´å¿«ã€æ›´ç¨³å®š**          |
| å“åº”ä½“æ•è· | âŒ            | âœ… æ”¯æŒ                   |
| ç»´æŠ¤æ€§     | å†…éƒ¨ç»´æŠ¤      | åŸºäºç¤¾åŒº + æºç å¯æ§       |

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0.0
**æœ€åæ›´æ–°**: 2026-02-08
**ç»´æŠ¤è€…**: Qwen Code Team
